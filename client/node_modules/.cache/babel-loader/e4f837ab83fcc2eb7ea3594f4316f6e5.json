{"ast":null,"code":"var _jsxFileName = \"/home/dobromir/Documents/React/reduxstructure/src/components/activateAccount/ActivateAccount.js\";\nimport React, { Component, Fragment } from 'react';\nimport './activateAccount.scss';\nimport * as api from '../../utils/api';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/alerts/alertActions';\n\nclass ActivateAccount extends Component {\n  constructor() {\n    super();\n    this.state = {\n      error: null\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n    const token = params.token;\n\n    try {\n      const {\n        data\n      } = await api.accountActivation({\n        token\n      });\n      this.props.setAlert(data.message, 'success');\n      this.redirectSuccess = setTimeout(() => {\n        this.props.history.push(\"/signin\");\n      }, 6000);\n    } catch (error) {\n      console.log('ERROR', error.response.data.message);\n      this.setState({\n        error: error.response.data.message\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.redirectSuccess) {\n      clearTimeout(this.redirectSuccess);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"actAccount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, this.state.error !== null && React.createElement(\"div\", {\n      className: \"alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Go back to \", React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Home Page\"))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return state;\n}\n\nfunction mapPropsToState(dispatch) {\n  return {\n    setAlert: (msg, alertType) => {\n      dispatch(setAlert(msg, alertType));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapPropsToState)(ActivateAccount);","map":{"version":3,"sources":["/home/dobromir/Documents/React/reduxstructure/src/components/activateAccount/ActivateAccount.js"],"names":["React","Component","Fragment","api","Link","connect","setAlert","ActivateAccount","constructor","state","error","componentDidMount","match","params","props","token","data","accountActivation","message","redirectSuccess","setTimeout","history","push","console","log","response","setState","componentWillUnmount","clearTimeout","render","mapStateToProps","mapPropsToState","dispatch","msg","alertType"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAyBC,QAAzB,QAAwC,OAAxC;AACA,OAAO,wBAAP;AACA,OAAO,KAAKC,GAAZ,MAAqB,iBAArB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,QAAR,QAAuB,iCAAvB;;AAEA,MAAMC,eAAN,SAA8BN,SAA9B,CAAwC;AAEpCO,EAAAA,WAAW,GAAE;AACT;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAG;AADC,KAAb;AAGH;;AAED,QAAMC,iBAAN,GAAyB;AACrB,UAAM;AAACC,MAAAA,KAAK,EAAG;AAACC,QAAAA;AAAD;AAAT,QAAqB,KAAKC,KAAhC;AACA,UAAMC,KAAK,GAAGF,MAAM,CAACE,KAArB;;AACA,QAAG;AACC,YAAM;AAACC,QAAAA;AAAD,UAAS,MAAMb,GAAG,CAACc,iBAAJ,CAAsB;AAACF,QAAAA;AAAD,OAAtB,CAArB;AACA,WAAKD,KAAL,CAAWR,QAAX,CAAoBU,IAAI,CAACE,OAAzB,EAAiC,SAAjC;AACA,WAAKC,eAAL,GAAuBC,UAAU,CAAC,MAAM;AACpC,aAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB;AACH,OAFgC,EAE/B,IAF+B,CAAjC;AAGH,KAND,CAMC,OAAMZ,KAAN,EAAY;AACTa,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBd,KAAK,CAACe,QAAN,CAAeT,IAAf,CAAoBE,OAAxC;AACA,WAAKQ,QAAL,CAAc;AAAChB,QAAAA,KAAK,EAAGA,KAAK,CAACe,QAAN,CAAeT,IAAf,CAAoBE;AAA7B,OAAd;AACH;AACJ;;AAEDS,EAAAA,oBAAoB,GAAE;AAClB,QAAG,KAAKR,eAAR,EAAwB;AACpBS,MAAAA,YAAY,CAAC,KAAKT,eAAN,CAAZ;AACH;AAEJ;;AAEDU,EAAAA,MAAM,GAAE;AACJ,WACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKpB,KAAL,CAAWC,KAAX,KAAmB,IAAnB,IACG;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKD,KAAL,CAAWC,KAAf,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAc,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAd,CAFJ,CAFR,CADJ;AAUH;;AA1CmC;;AA6CxC,SAASoB,eAAT,CAAyBrB,KAAzB,EAA+B;AAE3B,SAAOA,KAAP;AACH;;AAED,SAASsB,eAAT,CAAyBC,QAAzB,EAAkC;AAC9B,SAAM;AACF1B,IAAAA,QAAQ,EAAG,CAAC2B,GAAD,EAAKC,SAAL,KAAmB;AAACF,MAAAA,QAAQ,CAAC1B,QAAQ,CAAC2B,GAAD,EAAKC,SAAL,CAAT,CAAR;AAAkC;AAD/D,GAAN;AAGH;;AAED,eAAe7B,OAAO,CAACyB,eAAD,EAAiBC,eAAjB,CAAP,CAAyCxB,eAAzC,CAAf","sourcesContent":["import React,{Component, Fragment} from 'react';\nimport './activateAccount.scss';\nimport * as api from '../../utils/api';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {setAlert} from '../../redux/alerts/alertActions';\n\nclass ActivateAccount extends Component {\n\n    constructor(){\n        super();\n        this.state = {\n            error : null\n        };\n    }\n\n    async componentDidMount(){\n        const {match : {params}} = this.props;\n        const token = params.token;\n        try{\n            const {data} = await api.accountActivation({token});\n            this.props.setAlert(data.message,'success');\n            this.redirectSuccess = setTimeout(() => {\n                this.props.history.push(\"/signin\");\n            },6000);\n        }catch(error){\n            console.log('ERROR',error.response.data.message);\n            this.setState({error : error.response.data.message});\n        }\n    }\n\n    componentWillUnmount(){\n        if(this.redirectSuccess){\n            clearTimeout(this.redirectSuccess);\n        }\n\n    }\n\n    render(){\n        return(\n            <div className=\"actAccount\">\n                {this.state.error!==null && (\n                    <div className=\"alert-danger\">\n                        <p>{this.state.error}</p>\n                        <p>Go back to <Link to=\"/\">Home Page</Link></p>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n\n    return state;\n}\n\nfunction mapPropsToState(dispatch){\n    return{\n        setAlert : (msg,alertType) => {dispatch(setAlert(msg,alertType))}\n    }\n}\n\nexport default connect(mapStateToProps,mapPropsToState)(ActivateAccount);"]},"metadata":{},"sourceType":"module"}